<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="https://envs.sh/GFl.png" type="image/x-icon">
    <link rel="shortcut icon" href="https://envs.sh/GFl.png" type="image/x-icon">
    <link
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    rel="stylesheet" />
    <meta
      name="description"
      content="Stream and access files effortlessly on File Stream Hub." />
    <meta
      name="keywords"
      content="file streaming, file sharing, modern file hub" />
    <meta name="author" content="File Stream Hub" />
    <title>File Stream Hub - Modern File Streaming</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body {
        font-family: "Inter", sans-serif;
        background: linear-gradient(135deg, #1a2334, #2e3a52);
        color: #f1f5f9;
        margin: 0;
      }

      .header {
        text-align: center;
        padding: 30px 0;
      }

      .logo {
        font-size: 2.5rem;
        font-weight: bold;
        color: #48c6ef;
        cursor: pointer;
        letter-spacing: 1px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }

      .btn {
        background-color: #4c6ef5;
        color: #fff;
        padding: 10px 20px;
        border-radius: 8px;
        text-transform: uppercase;
        font-weight: bold;
        transition: background 0.3s ease;
      }

      .btn:hover {
        background-color: #3b5bdb;
      }

      .footer {
        background: #1a202c;
        color: #a0aec0;
        text-align: center;
        padding: 20px;
        margin-top: 30px;
      }

      .footer a {
        color: #48c6ef;
        text-decoration: none;
      }

      .footer a:hover {
        text-decoration: underline;
      }

      .transparent-btn {
  background-color: transparent;
  color: white;
  padding: 0.75rem;
  border-radius: 0.5rem;
  box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
}

.transparent-btn:hover {
  background-color: rgba(59, 130, 246, 1); /* Blue with no transparency */
}
      #scroll-buttons button {
    transition: all 0.3s ease-in-out;
  }
    </style>
  </head>
  <body>
    <header class="header text-center">
      <h1 class="logo neon-text" onclick="window.location.href = '/'">
        File Stream Hub
      </h1>
      <p>Stream and sort your files effortlessly with modern design.</p>
    </header>
    <section class="container">
      <form
        method="get"
        action="/"
        class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- File Name Search -->
        <div class="form-group">
          <label for="search">Search by File Name</label>
          <input
            type="text"
            id="search"
            name="search"
            placeholder="Enter file name..."
            value="{{ search_query }}"
            class="w-full p-3 rounded bg-gray-800 text-white border border-gray-700 focus:ring focus:ring-blue-500" />
        </div>

        <!-- Specific Date -->
        <div class="form-group">
          <label for="date">Specify Date</label>
          <input
            type="date"
            id="date"
            name="date"
            value="{{ date }}"
            class="w-full p-3 rounded bg-gray-800 text-white border border-gray-700 focus:ring focus:ring-blue-500" />
        </div>

        <!-- Date Range -->
        <div class="form-group">
          <label for="start_date">Start Date</label>
          <input
            type="date"
            id="start_date"
            name="start_date"
            value="{{ start_date }}"
            class="w-full p-3 rounded bg-gray-800 text-white border border-gray-700 focus:ring focus:ring-blue-500" />
        </div>
        <div class="form-group">
          <label for="end_date">End Date</label>
          <input
            type="date"
            id="end_date"
            name="end_date"
            value="{{ end_date }}"
            class="w-full p-3 rounded bg-gray-800 text-white border border-gray-700 focus:ring focus:ring-blue-500" />
        </div>

        <!-- Sort By Options -->
        <div class="form-group">
          <label for="sort_field">Sort By</label>
          <select
            id="sort_field"
            name="sort_field"
            class="w-full p-3 rounded bg-gray-800 text-white border border-gray-700 focus:ring focus:ring-blue-500">
            <option value="time" {% if sort_field == 'time' %}selected{% endif %}>Upload Time</option>
            <option value="file_size" {% if sort_field == 'file_size' %}selected{% endif %}>File Size</option>
            <option value="file_name" {% if sort_field == 'file_name' %}selected{% endif %}>File Name</option>
          </select>
        </div>

        <!-- Sort Order -->
        <div class="form-group">
          <label for="sort_order">Order</label>
          <select
            id="sort_order"
            name="sort_order"
            class="w-full p-3 rounded bg-gray-800 text-white border border-gray-700 focus:ring focus:ring-blue-500">
            <option value="asc" {% if sort_order == 'asc' %}selected{% endif %}>Ascending</option>
            <option value="desc" {% if sort_order == 'desc' %}selected{% endif %}>Descending</option>
          </select>
        </div>

        <div class="form-group">
            <button type="submit" class="btn w-full mt-6 bg-blue-500 hover:bg-blue-600">
              Apply Filters
            </button>
          </div>
        <div class="form-group">
            <button 
              type="button" 
              class="btn w-full mt-6 bg-red-500 hover:bg-red-600"
              onclick="resetFilters()">
              Reset Filters
            </button>
        </div>
          
      </form>
    </section>
    <main class="container mx-auto py-12">
        {% if not links %}
        <div class="text-center text-gray-300">
          <p>No files found for "{{ search_query }}".</p>
        </div>
        {% else %}
        {% if search_query and page == 1 %}
        <p class="text-center text-gray-300">
          Total {{ total_count }} Results found for "{{ search_query }}"
        </p>
        <br />
        {% endif %}
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
          {% for link in links %}
          <div
            class="file-card bg-gray-800 text-white rounded-lg shadow-lg overflow-hidden">
            <div class="file-card-header relative">
              <img
                src="{{ link.thumbnail_url or 'https://envs.sh/5bI.jpg' }}"
                alt="Thumbnail for {{ link.name }}"
                loading="lazy"
                class="w-full h-40 object-cover" />
              <div
                class="absolute top-2 right-2 bg-blue-500 text-xs text-white py-1 px-3 rounded">
                {{ link.size }}
              </div>
            </div>
            <div class="file-card-content p-4 flex flex-col justify-between">
              <div>
                <h3 class="text-lg font-semibold truncate">
                  {{ link.name }}
                </h3>
                <p class="text-sm text-gray-400 mt-2">
                  Uploaded: {{ link.time }}
                </p>
              </div>
              <div class="mt-4">
                {% if link.url %}
                <div class="flex gap-2">
                  <!-- Play Button with Icon -->
                  <a
                    href="{{ link.url }}"
                    target="_blank"
                    class="btn flex-1 bg-blue-500 hover:bg-blue-600 text-center py-2 rounded-lg font-bold transition flex items-center justify-center">
                    <i class="fas fa-play text-white text-lg"></i>
                  </a>
                
                  <!-- Download Button with Icon -->
                  {% if link.download_url %}
                  <a
                    href="{{ link.download_url }}"
                    target="_blank"
                    class="btn flex-1 bg-green-500 hover:bg-green-600 text-center py-2 rounded-lg font-bold transition flex items-center justify-center">
                    <i class="fas fa-download text-white text-lg"></i>
                  </a>
                  {% endif %}
                </div>
                
                
                
                {% else %}
                <button
                  class="btn w-full bg-red-600 text-center py-2 rounded-lg font-bold cursor-not-allowed">
                  Link Unavailable
                </button>
                {% endif %}
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
         <div class="mt-8 flex justify-center items-center space-x-3">
  {% if page > 1 %}
  <a href="/?page=1{% if search_query %}&search={{ search_query }}{% endif %}{% if date %}&date={{ date }}{% endif %}{% if start_date %}&start_date={{ start_date }}{% endif %}{% if end_date %}&end_date={{ end_date }}{% endif %}{% if sort_field %}&sort_field={{ sort_field }}{% endif %}{% if sort_order %}&sort_order={{ sort_order }}{% endif %}" 
     class="btn bg-gray-200 text-gray-800 px-4 py-2 text-base">
    <i class="fas fa-angle-double-left"></i>
  </a>
  <a href="/?page={{ page - 1 }}{% if search_query %}&search={{ search_query }}{% endif %}{% if date %}&date={{ date }}{% endif %}{% if start_date %}&start_date={{ start_date }}{% endif %}{% if end_date %}&end_date={{ end_date }}{% endif %}{% if sort_field %}&sort_field={{ sort_field }}{% endif %}{% if sort_order %}&sort_order={{ sort_order }}{% endif %}" 
     class="btn bg-gray-200 text-gray-800 px-4 py-2 text-base">
    <i class="fas fa-angle-left"></i>
  </a>
  {% endif %}
  <span class="text-gray-200 text-base">{{ page }} / {{ total_pages }}</span>
  {% if page < total_pages %}
  <a href="/?page={{ page + 1 }}{% if search_query %}&search={{ search_query }}{% endif %}{% if date %}&date={{ date }}{% endif %}{% if start_date %}&start_date={{ start_date }}{% endif %}{% if end_date %}&end_date={{ end_date }}{% endif %}{% if sort_field %}&sort_field={{ sort_field }}{% endif %}{% if sort_order %}&sort_order={{ sort_order }}{% endif %}" 
     class="btn bg-gray-200 text-gray-800 px-4 py-2 text-base">
    <i class="fas fa-angle-right"></i>
  </a>
  <a href="/?page={{ total_pages }}{% if search_query %}&search={{ search_query }}{% endif %}{% if date %}&date={{ date }}{% endif %}{% if start_date %}&start_date={{ start_date }}{% endif %}{% if end_date %}&end_date={{ end_date }}{% endif %}{% if sort_field %}&sort_field={{ sort_field }}{% endif %}{% if sort_order %}&sort_order={{ sort_order }}{% endif %}" 
     class="btn bg-gray-200 text-gray-800 px-4 py-2 text-base">
    <i class="fas fa-angle-double-right"></i>
  </a>
  {% endif %}
</div>

      
        {% endif %}
      </main>

    <!-- Scroll buttons -->
    <div id="scroll-buttons" class="fixed bottom-4 right-4">
  <!-- Scroll to Top Button -->
  <button
    id="scroll-top"
    onclick="scrollToTop()"
    class="hidden bg-transparent text-white border border-white p-3 rounded-full shadow transition-transform duration-300 hover:scale-110 focus:outline-none"
    title="Scroll to Top">
    ↑
  </button>

  <!-- Scroll to Bottom Button -->
  <button
    id="scroll-bottom"
    onclick="scrollToBottom()"
    class="hidden bg-transparent text-white border border-white p-3 rounded-full shadow transition-transform duration-300 hover:scale-110 focus:outline-none"
    title="Scroll to Bottom">
    ↓
  </button>
    </div>
    



    <footer class="footer">
      <p>&copy; 2024 File Stream Hub. <a href="#">Privacy Policy</a></p>
    </footer>

        
<script>
  const scrollTopButton = document.getElementById("scroll-top");
  const scrollBottomButton = document.getElementById("scroll-bottom");

  // Event listener for scrolling
  window.addEventListener("scroll", () => {
    const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
    const scrollHeight = document.documentElement.scrollHeight;
    const clientHeight = document.documentElement.clientHeight;

    // Calculate the current scroll percentage
    const scrollPercentage = (scrollTop / (scrollHeight - clientHeight)) * 100;

    // Show "Scroll Up" button and hide "Scroll Down" button when past 70% of the page
    if (scrollPercentage > 70) {
      scrollTopButton.classList.remove("hidden");
      scrollBottomButton.classList.add("hidden");
    } else {
      // Show "Scroll Down" button and hide "Scroll Up" button
      scrollTopButton.classList.add("hidden");
      scrollBottomButton.classList.remove("hidden");
    }
  });

  // Scroll to Top Functionality
  function scrollToTop() {
    window.scrollTo({ top: 0, behavior: "smooth" });
  }

  // Scroll to Bottom Functionality
  function scrollToBottom() {
    const scrollHeight = document.documentElement.scrollHeight;
    window.scrollTo({ top: scrollHeight, behavior: "smooth" });
  }
        function resetFilters() {
            document.getElementById('search').value = '';
            document.getElementById('date').value = '';
            document.getElementById('start_date').value = '';
            document.getElementById('end_date').value = '';
            document.getElementById('sort_field').value = 'time'; 
            document.getElementById('sort_order').value = 'desc';
            document.querySelector('form').submit();
        }
    </script>
  </body>
</html>
